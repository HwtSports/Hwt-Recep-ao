<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recepção HWT - Sistema Hoteleiro</title>
    <meta name="description" content="Sistema gratuito de gestão hoteleira para pequenos hotéis e pousadas">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ... (todo o CSS permanece igual) ... */
        
        /* NOVOS ESTILOS ADICIONADOS */
        .status-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .status-btn {
            flex: 1;
            min-width: 120px;
            padding: 10px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            text-align: center;
        }
        
        .status-btn.disponivel {
            background-color: var(--verde);
            color: white;
        }
        
        .status-btn.ocupado {
            background-color: var(--vermelho);
            color: white;
        }
        
        .status-btn.manutencao {
            background-color: var(--amarelo);
            color: var(--cinza);
        }
        
        .status-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .status-btn.active {
            box-shadow: 0 0 0 2px var(--branco), 0 0 0 4px currentColor;
        }
        
        /* FIM DOS NOVOS ESTILOS */
    </style>
</head>
<body>
    <!-- ... (todo o HTML permanece igual) ... -->
    
    <!-- Modal para editar check-in -->
    <div id="modal-editar-checkin" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-editar-titulo">Editar Quarto</h3>
                <span class="close close-editar">&times;</span>
            </div>
            <form id="editar-checkin-form">
                <input type="hidden" id="editar-quarto">
                
                <div class="form-group">
                    <label for="editar-status">Status do Quarto</label>
                    <!-- REMOVEMOS O SELECT E ADICIONAMOS OS BOTÕES -->
                    <div class="status-actions">
                        <button type="button" class="status-btn disponivel active" data-status="disponivel">
                            <i class="fas fa-check-circle"></i> Disponível
                        </button>
                        <button type="button" class="status-btn ocupado" data-status="ocupado">
                            <i class="fas fa-user-friends"></i> Ocupado
                        </button>
                        <button type="button" class="status-btn manutencao" data-status="manutencao">
                            <i class="fas fa-tools"></i> Manutenção
                        </button>
                    </div>
                    <!-- CAMPO OCULTO PARA MANTER O VALOR DO STATUS -->
                    <input type="hidden" id="editar-status" value="disponivel" required>
                </div>
                
                <div id="editar-campos-ocupado">
                    <div class="form-group">
                        <label for="editar-num-pessoas">Número de Pessoas</label>
                        <select id="editar-num-pessoas" required>
                            <option value="1">1 Pessoa</option>
                            <option value="2">2 Pessoas</option>
                            <option value="3">3 Pessoas</option>
                            <option value="4">4 Pessoas</option>
                        </select>
                    </div>
                    
                    <div id="editar-campos-hospedes">
                        <!-- Campos dos hóspedes serão gerados dinamicamente -->
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editar-data-entrada">Data de Entrada</label>
                            <input type="date" id="editar-data-entrada" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="editar-data-saida">Data de Saída</label>
                            <input type="date" id="editar-data-saida" required>
                        </div>
                    </div>
                    
                    <div class="time-inputs">
                        <div class="form-group">
                            <label for="editar-hora-entrada">Hora de Entrada</label>
                            <input type="time" id="editar-hora-entrada" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="editar-hora-saida">Hora de Saída</label>
                            <input type="time" id="editar-hora-saida" required>
                        </div>
                    </div>

                    <!-- Campo de observação - APENAS UMA ABA -->
                    <div class="form-group">
                        <label for="editar-observacao">Observação (Opcional)</label>
                        <textarea id="editar-observacao" placeholder="Digite alguma observação se necessário..."></textarea>
                    </div>
                </div>
                
                <button type="submit">Salvar Alterações</button>
                <button type="button" class="secondary-btn" id="cancelar-edicao">Cancelar</button>
            </form>
        </div>
    </div>
    
    <script>
        // ... (todo o JavaScript permanece igual) ...
        
        // NOVAS FUNÇÕES ADICIONADAS
        function configurarBotoesStatus() {
            const botoesStatus = document.querySelectorAll('.status-btn');
            
            botoesStatus.forEach(botao => {
                botao.addEventListener('click', function() {
                    // Remover classe active de todos os botões
                    botoesStatus.forEach(b => b.classList.remove('active'));
                    
                    // Adicionar classe active ao botão clicado
                    this.classList.add('active');
                    
                    // Atualizar o valor do campo oculto
                    const status = this.getAttribute('data-status');
                    document.getElementById('editar-status').value = status;
                    
                    // Mostrar/ocultar campos de hóspedes baseado no status
                    const camposOcupado = document.getElementById('editar-campos-ocupado');
                    if (status === 'ocupado') {
                        camposOcupado.style.display = 'block';
                    } else {
                        camposOcupado.style.display = 'none';
                    }
                });
            });
        }
        
        // MODIFICAÇÃO NA FUNÇÃO abrirEdicaoCheckin
        function abrirEdicaoCheckin(quarto, hospede) {
            const modal = document.getElementById('modal-editar-checkin');
            const titulo = document.getElementById('modal-editar-titulo');
            const camposOcupado = document.getElementById('editar-campos-ocupado');
            
            titulo.textContent = `Editar Quarto ${quarto}`;
            
            // Configurar os botões de status
            configurarBotoesStatus();
            
            // Preencher formulário com dados existentes, se houver
            document.getElementById('editar-quarto').value = quarto;
            
            if (hospede) {
                // Definir status atual
                const status = hospede.status || 'ocupado';
                document.getElementById('editar-status').value = status;
                
                // Ativar o botão correspondente
                const botoesStatus = document.querySelectorAll('.status-btn');
                botoesStatus.forEach(botao => {
                    botao.classList.remove('active');
                    if (botao.getAttribute('data-status') === status) {
                        botao.classList.add('active');
                    }
                });
                
                if (status === 'manutencao') {
                    camposOcupado.style.display = 'none';
                } else {
                    camposOcupado.style.display = 'block';
                    
                    document.getElementById('editar-num-pessoas').value = hospede.numPessoas || 1;
                    
                    // Preencher dados de entrada/saída
                    document.getElementById('editar-data-entrada').value = hospede.entrada || '';
                    document.getElementById('editar-data-saida').value = hospede.saida || '';
                    document.getElementById('editar-hora-entrada').value = hospede.horaEntrada || '14:00';
                    document.getElementById('editar-hora-saida').value = hospede.horaSaida || '12:00';
                    
                    // Preencher observação
                    document.getElementById('editar-observacao').value = hospede.observacao || '';
                    
                    // Atualizar campos de hóspedes
                    atualizarCamposHospedes();
                    
                    // Preencher dados dos hóspedes
                    if (hospede.nomes && hospede.nomes.length > 0) {
                        for (let i = 0; i < hospede.nomes.length; i++) {
                            const nomeField = document.getElementById(`editar-nome-hospede${i+1}`);
                            const docField = document.getElementById(`editar-documento${i+1}`);
                            const telField = document.getElementById(`editar-telefone${i+1}`);
                            
                            if (nomeField) nomeField.value = hospede.nomes[i];
                            if (docField) docField.value = hospede.documentos ? hospede.documentos[i] : '';
                            if (telField) telField.value = hospede.telefones ? hospede.telefones[i] : '';
                        }
                    } else {
                        // Compatibilidade com dados antigos
                        document.getElementById('editar-nome-hospede1').value = hospede.nome || '';
                        document.getElementById('editar-documento1').value = hospede.documento || '';
                        document.getElementById('editar-telefone1').value = hospede.telefone || '';
                    }
                }
            } else {
                // Status padrão para quarto vazio
                document.getElementById('editar-status').value = 'disponivel';
                camposOcupado.style.display = 'none';
                
                // Limpar campos
                document.getElementById('editar-num-pessoas').value = '1';
                document.getElementById('editar-observacao').value = '';
                
                // Definir datas padrão
                const hoje = new Date().toISOString().split('T')[0];
                const amanha = new Date();
                amanha.setDate(amanha.getDate() + 1);
                const amanhaStr = amanha.toISOString().split('T')[0];
                
                document.getElementById('editar-data-entrada').value = hoje;
                document.getElementById('editar-data-saida').value = amanhaStr;
                document.getElementById('editar-hora-entrada').value = '14:00';
                document.getElementById('editar-hora-saida').value = '12:00';
                
                // Atualizar campos de hóspedes
                atualizarCamposHospedes();
            }
            
            modal.style.display = 'flex';
        }
        
        // ... (restante do JavaScript permanece igual) ...
    </script>
</body>
</html>
